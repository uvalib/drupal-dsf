{#
/**
 * @file
 * Bootstrap's theme implementation for a branding block.
 *
 * Each branding element variable (logo, name, slogan) is only available if
 * enabled in the block configuration.
 *
 * Available variables:
 * - site_logo: Logo for site as defined in Appearance or theme settings.
 * - site_name: Name for site as defined in Site information settings.
 * - site_slogan: Slogan for site as defined in Site information settings.
 */
#}
{% set attributes = attributes.addClass('site-branding').setAttribute('style', 'position: relative;') %}

{% if site_logo or site_name %}
<a href="https://library.virginia.edu/" title="{{ 'University of Virginia Library homepage'|t }}" rel="home" class="navbar-brand">

{% if site_logo %}
<img src="{{ site_logo }}" alt="{{ 'University of Virginia Library logo'|t }}" class="img-fluid d-inline-block align-top"/>
{% endif %}
{{ site_name }}
</a>
{% endif %}

{# Add development environment indicator - always show if in development #}
{% if is_development %}
<div class="dev-environment-warning" style="margin-left: 10px; display: inline-block; vertical-align: middle;">
	<span class="dev-environment-badge" style="background-color: #b85450; color: white; padding: 5px 12px; font-size: 13px; font-weight: normal; border-radius: 4px;">
		{{ env_label }}
	</span>
	<span style="color: #999; font-size: 11px; margin-left: 8px; font-style: italic;">
		{% if env_type == 'staging' %}
			{{ env_warning }}
		{% else %}
			Changes may be lost when database is updated from production.
		{% endif %}
	</span>
</div>
{% endif %}

{# Add DSF Analytics admin navigation for administrators #}
{% if logged_in and is_admin %}
<div class="admin-analytics-nav" style="position: absolute; right: 15px; top: 15px;">
	<div class="dropdown" style="position: relative; display: inline-block;">
		<span style="font-size: 12px; cursor: pointer; padding: 4px 8px; color: #333;" 
		      onclick="toggleAnalyticsMenu(event)"
		      id="analyticsMenuToggle">Analytics ▼</span>
		<div id="analyticsMenu" 
		     style="display: none; position: absolute; right: 0; top: 100%; background: white; border: 1px solid #ccc; border-radius: 4px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); min-width: 120px; z-index: 1000;">
			<a href="/admin/reports/dsf-analytics" 
			   style="display: block; padding: 8px 12px; text-decoration: none; color: #333; font-size: 12px; border-bottom: 1px solid #eee;"
			   onmouseover="this.style.backgroundColor='#f5f5f5'" 
			   onmouseout="this.style.backgroundColor='white'">Dashboard</a>
			<a href="/admin/config/system/dsf-analytics" 
			   style="display: block; padding: 8px 12px; text-decoration: none; color: #333; font-size: 12px;"
			   onmouseover="this.style.backgroundColor='#f5f5f5'" 
			   onmouseout="this.style.backgroundColor='white'">Settings</a>
		</div>
	</div>
	<script>
	function toggleAnalyticsMenu(event) {
		event.stopPropagation();
		var menu = document.getElementById('analyticsMenu');
		var toggle = document.getElementById('analyticsMenuToggle');
		if (menu.style.display === 'none') {
			menu.style.display = 'block';
			toggle.innerHTML = 'Analytics ▲';
		} else {
			menu.style.display = 'none';
			toggle.innerHTML = 'Analytics ▼';
		}
	}
	document.addEventListener('click', function() {
		var menu = document.getElementById('analyticsMenu');
		var toggle = document.getElementById('analyticsMenuToggle');
		if (menu) {
			menu.style.display = 'none';
			toggle.innerHTML = 'Analytics ▼';
		}
	});
	</script>
</div>
{% endif %}

{% if site_slogan %}
<div class="d-inline-block align-top site-name-slogan">
{{ site_slogan }}
</div>
{% endif %}
