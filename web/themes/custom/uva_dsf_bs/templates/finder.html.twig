<div id="app" role="main">
	<div class="row">
		<div class="col-md-12 app-title">
			<h1 class="title" id='pagetitle'>UVA Data Storage Finder</h1>
			<p class="lead" id='pagesubtitle'>Find the right data storage solution for your research and projects.</p>

			{# <p class="cert">
																			<span class="fa fa-comments"></span>We welcome
																			<a href="#">feedback</a>
																			on this tool.</p> #}
		</div>
	</div>

	<div class="row">
		<div class="col-md-12">

			<hr class="section-break">
			<h2 class="sub-heading heading-services">Describe your data</h2>
			<div class="cd-row">
				<div class="cd-cell cd-questions">
					<div class="cd-overflow" tabindex="0" role="group" aria-labelledby="pagequestionheader">
						<div class="questions-header">
							<h3 class="step-1" id='pagequestionheader'>
								Answer these questions to help identify services that are suitable for your needs.
							</h3>
							<button class="btn btn-secondary btn-clear-filters ">Clear Filters</button>
						</div>
						<ol id="questionlist"></ol>
					</div>
				</div>
				<div class="cd-cell cd-services">
					<hr class="section-break hidden-sm hidden-md hidden-lg">
					<h2 class="sub-heading hidden-sm hidden-md hidden-lg">Services</h2>
					<div class="services-header">
						<div>
							<h3>
								<span class="fa fa-arrow-circle-right"></span>
								<span id='pageserviceheader'>
									Select services you would like to compare.
								</span>
							</h3>
						</div>
						<div>
							<button class="btn btn-secondary btn-select-all selectall-button">Select All</button>
							<button class="btn btn-secondary btn-select-none clear-button">Clear Selections</button>
						</div>
					</div>
					<div id="modularstorage-services"></div>
				</div>
			</div>
		</div>
	</div>

	{# moved this block up from the bottom to be more semantically correct #}
	<div class="jump-to-chart">
		<div class="container">
			<div class="media">
				<div class="media-body">
					<p>
						<span id="selection-number">0</span>
						Services Selected
					</p>
				</div>
				<div class="media-right media-middle compare_button_area">
					<button class="btn btn-secondary jump_button">Compare Results</button>
				</div>
			</div>
		</div>
	</div>
	{# end block #}

	<div id="container34" style="display:none;">
		<hr class="section-break">
		<div class="row">
			<div class="col-md-12">
				<h2 class="comparisonchart-wrapper-wrapper sub-heading" id='pagechartheader'>
					Compare the services which match your selected criteria.
				</h2>
				<div>
					<button class="btn btn-sm btn-secondary chart-select-all selectall-button">Select All</button>
					<button class="btn btn-sm btn-primary chart-select-none clear-button">Clear Selections</button>
				</div>
				<fieldset>
					<legend class="sr-only">Present in comparison table?</legend>
					<div class="comparisonlist-wrapper" role="group" aria-labelledby="comparison-controls-heading"></div>
				</fieldset>
				<div class="comparisonchart-wrapper" id="comparisonchart-wrapper" tabindex="0" role="group" aria-labelledby="pagechartheader" aria-describedby="table-help">
					<table class="table table-striped table-bordered scrolling" id="comparisonchart" role="table" aria-label="Service comparison data"></table>
					<!-- WCAG 2.2 AA - Consistent Help -->
					<div id="table-help" class="sr-only">
						Use arrow keys to navigate the table. Press Tab to move between interactive elements. Press Escape to exit table navigation mode.
					</div>
					<!-- Empty state message when no services are selected -->
					<div id="empty-comparison-message" class="alert alert-info text-center" style="display: none; margin-top: 2rem;" role="status" aria-live="polite">
						<div class="mb-3">
							<i class="fa fa-info-circle fa-2x text-primary" aria-hidden="true"></i>
						</div>
						<h4 class="h5 mb-3">No services selected for comparison</h4>
						<p class="mb-3">
							Please select one or more services from the list above to view a detailed comparison table.
						</p>
						<p class="text-muted mb-0">
							<small>Use the checkboxes next to services to add them to your comparison.</small>
						</p>
					</div>
				</div>
			</div>
		</div>
		<hr class="section-break">
		<div class="row">
			<div class="col-md-12">
				<h2 class="sub-heading">
					Save or share your results
				</h2>
				<span id='pageemailformheader'>
					Use these options to save, print, or share your selected criteria and results.
				</span>

				<div class="results-actions">
					<div class="btn-group" role="group" aria-label="Save and share options">
						<button type="button" id="print_results" class="btn btn-primary" aria-describedby="print-desc" data-action="print">
							<i class="fa fa-print" aria-hidden="true"></i> Print Results
						</button>
						<span id="print-desc" class="sr-only">Opens a print-friendly view of your results in a new window</span>
						<button type="button" id="copy_results" class="btn btn-secondary" aria-describedby="copy-desc" data-action="copy">
							<i class="fa fa-copy" aria-hidden="true"></i> Copy to Clipboard
						</button>
						<span id="copy-desc" class="sr-only">Copies your results as text to the clipboard</span>
						{# Email functionality temporarily disabled - button and description hidden from accessibility tree #}
						<button type="button" id="generate_email" class="btn btn-secondary" aria-describedby="email-desc" data-action="email" style="display: none;" aria-hidden="true" tabindex="-1">
							<i class="fa fa-envelope" aria-hidden="true"></i> Generate Email
						</button>
						<span id="email-desc" class="sr-only" style="display: none;" aria-hidden="true">Creates an email with your results that you can send or copy</span>
					</div>
					<!-- WCAG 2.2 AA - Provide help text for complex interactions -->
					<div class="mt-2 text-muted" id="results-help" aria-live="polite">
						<small><i class="fa fa-info-circle" aria-hidden="true"></i> 
						Use these buttons to save or share your comparison results. The shareable link below updates automatically as you make selections.</small>
					</div>
				</div>

				<div id="email_preview" class="email-preview" style="display: none;" aria-hidden="true" role="region" aria-labelledby="email-preview-heading" aria-describedby="email-preview-instructions">
					<h4 id="email-preview-heading" tabindex="-1">Email Preview</h4>
					<p class="text-muted" id="email-preview-instructions">Review the content below, then choose how to send it:</p>
					<div class="alert alert-warning" role="alert" aria-live="polite">
						<i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
						<strong>Note:</strong> If the "Try Email Client" button doesn't work, this is common on Mac Chrome and other browsers. 
						Simply use the "Copy Email Text" button instead to copy the content to your clipboard, then paste it into your email application.
						<!-- WCAG 2.2 AA - Provide accessible help -->
						<div class="mt-2">
							<button type="button" class="btn btn-sm btn-outline-secondary" onclick="this.nextElementSibling.style.display = this.nextElementSibling.style.display === 'none' ? 'block' : 'none';" aria-expanded="false" aria-controls="email-help-details">
								<i class="fa fa-question-circle" aria-hidden="true"></i> Need more help?
							</button>
							<div id="email-help-details" style="display: none;" class="mt-2 p-2 border-left">
								<strong>Troubleshooting email sharing:</strong>
								<ul>
									<li>On Mac: If no email app opens, you may not have a default email client set in System Preferences</li>
									<li>On Windows: Check your default apps settings for email</li>
									<li>Alternative: Copy the text and paste it into Gmail, Outlook, or your preferred email service</li>
									<li>The copied content includes the subject line and full message</li>
								</ul>
							</div>
						</div>
					</div>
					<div class="card" role="article" aria-labelledby="email-subject-heading">
						<div class="card-header">
							<strong id="email-subject-heading">Subject:</strong> <span id="email_subject">Data Storage Finder Results</span>
						</div>
						<div class="card-body">
							<div id="email_content" role="document" aria-label="Email content preview"></div>
						</div>
					</div>
					<div class="mt-3">
						<div class="btn-group" role="group" aria-label="Email sharing options">
							<button type="button" id="copy_email_content" class="btn btn-primary" aria-describedby="copy-email-desc" data-action="copy-email">
								<i class="fa fa-copy" aria-hidden="true"></i> Copy Email Text
							</button>
							<span id="copy-email-desc" class="sr-only">Copies email content to clipboard for manual pasting - recommended method</span>
							<a href="#" id="open_email_client" class="btn btn-secondary" aria-describedby="email-client-desc" role="button" data-action="open-email">
								<i class="fa fa-external-link" aria-hidden="true"></i> Try Email Client
							</a>
							<span id="email-client-desc" class="sr-only">Attempts to open your default email application (may not work on all systems)</span>
						</div>
						<button type="button" id="close_email_preview" class="btn btn-secondary ml-2" aria-label="Close email preview" data-action="close-preview">Close</button>
					</div>
					<div id="email_copy_feedback" class="alert alert-info mt-2" style="display: none;" role="status" aria-live="polite">
						<i class="fa fa-info-circle" aria-hidden="true"></i> Email content copied to clipboard. You can paste it into your email client manually.
					</div>
				</div>

				<!-- Persistent Share Link Display -->
				<div id="persistent_share_link" class="persistent-share-link mt-3" role="region" aria-labelledby="persistent-share-heading">
					<h4 id="persistent-share-heading" class="h6 mb-2">
						<i class="fa fa-link" aria-hidden="true"></i> Shareable Link
					</h4>
					<div class="card">
						<div class="card-body p-3">
							<p class="text-muted mb-2" style="font-size: 0.9em;">
								Bookmark this page or share this link to preserve your current comparison setup:
							</p>
							<div class="input-group">
								<input type="text" class="form-control" id="persistent_share_url" readonly aria-label="Current shareable URL for this comparison" style="font-size: 14px; background-color: #f8f9fa;">
								<div class="input-group-append">
									<button type="button" id="copy_persistent_link" class="btn btn-primary" aria-describedby="copy-persistent-desc" data-action="copy-persistent">
										<i class="fa fa-copy" aria-hidden="true"></i> Copy Link
									</button>
								</div>
							</div>
							<span id="copy-persistent-desc" class="sr-only">Copies the current shareable link to clipboard</span>
							<div id="persistent_copy_feedback" class="alert alert-success mt-2" style="display: none;" role="status" aria-live="polite">
								<i class="fa fa-check-circle" aria-hidden="true"></i> Share link copied to clipboard!
							</div>
						</div>
					</div>
				</div>

				<div id="copy_feedback" class="alert alert-success mt-3" style="display: none;" role="status" aria-live="polite">
					<i class="fa fa-check-circle" aria-hidden="true"></i> Results copied to clipboard!
				</div>
			</div>
		</div>
	</div>

	{# jump to chart block used to live here #}

	{# <div style="margin-top:25px;">
							<p class="cert">
								<span class="fa fa-comments"></span>We welcome
								<a href="#">feedback</a>
								on this tool.</p>
						</div> #}
</div>
